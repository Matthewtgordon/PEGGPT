{
  "version": "v3.2.1",
  "description": "PEG Workflows.json â€” Orchestrator/session flow, agent routing, DSL pathing, state sync",
  "metadata": {
    "updated_at": "2025-05-02T12:00:00-04:00",
    "author": "PEG Orchestrator",
    "consolidated": true
  },
  "session_bundle": "PEG_v3_agentic_tests",
  "core_agent": "PEG",
  "components": [
    "MacroSelector",
    "AutoTune",
    "Bio Injection",
    "SessionSync",
    "PersistentMemoryIndex"
  ],
  "workflow_sequences": [
    {
      "name": "StandardPromptOrchestration",
      "steps": [
        "intake_objective",
        "context_tag_scan",
        "agent_init",
        "macro_chain_build",
        "run_macro_sequence",
        "fallback_invoke_if_needed",
        "test_review",
        "wrap_export"
      ]
    },
    {
      "name": "MultiAgentCoordination",
      "steps": [
        "PEG_issues_directive",
        "AGENT1_executes_task",
        "AGENT2_validates_challenges",
        "PEG_validates_confirms_or_redirects",
        "log_to_Journal"
      ]
    },
    {
      "name": "ExpandedAgentOrchestration",
      "steps": [
        "PEG_receives_objective",
        "ENGINEER_builds_macro",
        "VALIDATOR_checks_schema_and_structure",
        "SCORER_applies_scoring_rules",
        "TESTER_triggers_edge_and_regression_tests",
        "CHALLENGER_flags_errors_or_conflicts",
        "PEG_reviews_final_output_or_reroutes",
        "LOGGER_logs_all_events"
      ]
    }
  ],
  "dsl_paths": [
    {
      "from": "intake",
      "to": "prep",
      "trigger": "objective_identified"
    },
    {
      "from": "prep",
      "to": "build",
      "trigger": "macros_initialized"
    },
    {
      "from": "build",
      "to": "review",
      "trigger": "macro_chain_complete"
    },
    {
      "from": "review",
      "to": "export",
      "trigger": "all_tests_passed"
    },
    {
      "from": "review",
      "to": "export",
      "trigger": "fallback_invoked"
    },
    {
      "from": "build",
      "to": "tester",
      "trigger": "expanded_flow_enabled"
    },
    {
      "from": "tester",
      "to": "challenger"
    },
    {
      "from": "challenger",
      "to": "review"
    }
  ],
  "agent_roles": {
    "PEG": "Session orchestrator and final arbiter; controls fallback, confirms resolution, logs via LOGGER.",
    "ENGINEER": "Designs macro chains, prompt logic, injects constraints from objective.",
    "VALIDATOR": "Validates prompt structure, schema conformance, DSL/JSON output per enforcement rules.",
    "CHALLENGER": "Stress-tests logic chains, triggers fallback if structural or logic flaws detected.",
    "LOGGER": "Audits file changes, macro mutations, agent actions, and scoring logs.",
    "SCORER": "Scores outputs using clarity, format, obedience, and override compliance.",
    "TESTER": "Injects regression and edge tests from suite; flags drift or invalid fallback."
  },
  "session_sync": {
    "enabled": true,
    "persistent_index": true,
    "cross_session_memory": true,
    "bio_sync": ["Bio_A", "Bio_B"]
  },
  "fallback_behavior": {
    "on_error": "invoke_macro('reroute_fallback')",
    "on_agent_conflict": "PEG resolves, logs to Journal"
  },
  "revision": {
    "last_updated": "2025-05-02T12:00:00-04:00",
    "revision_tag": "05.02.v4A"
  }
}
